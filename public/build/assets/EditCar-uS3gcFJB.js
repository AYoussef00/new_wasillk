import{r as c,s as h,c as b,o as y,a as k,u as S,z as C,w as M,d as e,h as p,t as x,i as F,j as l,v as n,x as f,A as i,F as B,q as v}from"./app-CiYPF32z.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-CH9vAW65.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-5b_T0mwo.js";import"./useForwardExpose-Bz4YYev0.js";import"./VisuallyHidden-CANzLnW5.js";import"./createLucideIcon-B_zGqJ31.js";import"./index-SSFl27Pj.js";import"./car-CNk-1aNX.js";const z={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto p-6"},A={class:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white"},O={class:"text-blue-100"},D={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},N={class:"flex items-center"},E={class:"mr-3"},L={class:"text-sm font-medium text-green-800"},J={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},P={class:"flex items-center"},$={class:"mr-3"},q={class:"text-sm font-medium text-red-800"},G={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm"},I=["value"],T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},K={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={key:0,class:"mt-2"},W=["src","alt"],X={key:0,class:"mt-2"},Z=["src","alt"],ee={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},te={class:"flex items-center"},ae={class:"flex items-center"},re={class:"flex items-center"},le={class:"flex items-center"},se={class:"flex items-center"},oe={class:"flex items-center"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne={class:"flex items-center"},ue={class:"flex items-center"},ie={class:"flex justify-end space-x-3 space-x-reverse"},ge=["disabled"],ke={__name:"EditCar",props:{car:Object,categories:Array,success:String,error:String},setup(o){const s=o,g=c(!1),r=c({brand_ar:"",model_ar:"",year:new Date().getFullYear(),color_ar:"",transmission:"",fuel_type:"",seats:5,doors:4,daily_rate:"",weekly_rate:"",monthly_rate:"",license_plate:"",description_ar:"",features:[],status:"available",is_featured:!1,is_active:!0,main_image:null,secondary_image:null});h(()=>{s.car&&(r.value={brand_ar:s.car.brand_ar||"",model_ar:s.car.model_ar||"",year:s.car.year||new Date().getFullYear(),color_ar:s.car.color_ar||"",transmission:s.car.transmission||"",fuel_type:s.car.fuel_type||"",seats:s.car.seats||5,doors:s.car.doors||4,daily_rate:s.car.daily_rate||"",weekly_rate:s.car.weekly_rate||"",monthly_rate:s.car.monthly_rate||"",license_plate:s.car.license_plate||"",description_ar:s.car.description_ar||"",features:s.car.features||[],status:s.car.status||"available",is_featured:s.car.is_featured||!1,is_active:s.car.is_active!==!1,main_image:null,secondary_image:null})});const w=d=>{r.value.main_image=d.target.files[0]},U=d=>{r.value.secondary_image=d.target.files[0]},V=()=>{v.get("/dashboard/cars")},_=()=>{g.value=!0,!r.value.weekly_rate&&r.value.daily_rate&&(r.value.weekly_rate=(parseFloat(r.value.daily_rate)*6).toFixed(2)),!r.value.monthly_rate&&r.value.daily_rate&&(r.value.monthly_rate=(parseFloat(r.value.daily_rate)*20).toFixed(2));const d=new FormData;if(d.append("_token",document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""),d.append("_method","PUT"),Object.keys(r.value).forEach(a=>{a==="features"?d.append(a,JSON.stringify(r.value[a])):a==="main_image"||a==="secondary_image"?r.value[a]&&d.append(a,r.value[a]):a==="is_featured"||a==="is_active"?d.append(a,r.value[a]?"1":"0"):d.append(a,r.value[a])}),!Object.keys(r.value).some(a=>{if(a==="main_image"||a==="secondary_image")return r.value[a]!==null;const u=s.car[a],m=r.value[a];return Array.isArray(m)&&Array.isArray(u)?JSON.stringify(m)!==JSON.stringify(u):m!==u})){alert("يرجى تعديل حقل واحد على الأقل"),g.value=!1;return}v.post(`/dashboard/cars/${s.car.id}`,d,{onSuccess:()=>{g.value=!1,v.get("/dashboard/cars")},onError:a=>{let u="حدث خطأ أثناء تحديث السيارة: ";typeof a=="object"?Object.keys(a).forEach(m=>{u+=`
`+m+": "+a[m]}):u+=a,alert(u),g.value=!1}})};return(d,t)=>(y(),b(B,null,[k(S(C),{title:"تعديل السيارة - لوحة التحكم"}),k(j,null,{default:M(()=>[e("div",z,[e("div",A,[t[21]||(t[21]=e("h1",{class:"text-2xl font-bold mb-2"},"تعديل السيارة",-1)),e("p",O,"تعديل بيانات السيارة: "+x(o.car.brand_ar)+" "+x(o.car.model_ar),1)]),o.success?(y(),b("div",D,[e("div",N,[t[22]||(t[22]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",E,[e("p",L,x(o.success),1)])])])):p("",!0),o.error?(y(),b("div",J,[e("div",P,[t[23]||(t[23]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",$,[e("p",q,x(o.error),1)])])])):p("",!0),e("div",G,[t[55]||(t[55]=e("div",{class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])]),e("div",{class:"mr-3"},[e("p",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," يمكنك تعديل أي حقل تريده فقط - لا حاجة لملء جميع الحقول ")])])],-1)),e("form",{onSubmit:F(_,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[e("input",{type:"hidden",name:"_token",value:d.$page.props.csrf_token},null,8,I),e("div",T,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الماركة",-1)),l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.brand_ar=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"مثال: تويوتا"},null,512),[[n,r.value.brand_ar]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الموديل",-1)),l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.model_ar=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"مثال: كورولا"},null,512),[[n,r.value.model_ar]])])]),e("div",Y,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"السنة",-1)),l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.year=a),type:"number",min:"2000",max:"2030",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.year]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"اللون",-1)),l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.color_ar=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"مثال: أبيض"},null,512),[[n,r.value.color_ar]])])]),e("div",H,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الناقل",-1)),l(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.transmission=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},t[28]||(t[28]=[e("option",{value:""},"اختر الناقل",-1),e("option",{value:"أوتوماتيك"},"أوتوماتيك",-1),e("option",{value:"يدوي"},"يدوي",-1)]),512),[[f,r.value.transmission]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"نوع الوقود",-1)),l(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.fuel_type=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},t[30]||(t[30]=[e("option",{value:""},"اختر نوع الوقود",-1),e("option",{value:"بنزين"},"بنزين",-1),e("option",{value:"ديزل"},"ديزل",-1),e("option",{value:"كهربائي"},"كهربائي",-1),e("option",{value:"هجين"},"هجين",-1)]),512),[[f,r.value.fuel_type]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"عدد المقاعد",-1)),l(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.seats=a),type:"number",min:"2",max:"15",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.seats]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"عدد الأبواب",-1)),l(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.doors=a),type:"number",min:"2",max:"5",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.doors]])])]),e("div",K,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"السعر اليومي (ريال)",-1)),l(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.daily_rate=a),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.daily_rate]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"السعر الأسبوعي (ريال)",-1)),l(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>r.value.weekly_rate=a),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.weekly_rate]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"السعر الشهري (ريال)",-1)),l(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.value.monthly_rate=a),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[n,r.value.monthly_rate]])])]),e("div",Q,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الصورة الرئيسية",-1)),e("input",{onChange:w,type:"file",accept:"image/*",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,32),t[39]||(t[39]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"اختر صورة جديدة للصورة الرئيسية (اختياري)",-1)),o.car.images&&o.car.images[0]?(y(),b("div",R,[t[37]||(t[37]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"الصورة الحالية:",-1)),e("img",{src:o.car.images[0],alt:o.car.brand_ar,class:"w-20 h-20 object-cover rounded-md mt-1"},null,8,W)])):p("",!0)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الصورة الثانوية",-1)),e("input",{onChange:U,type:"file",accept:"image/*",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,32),t[42]||(t[42]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"اختر صورة جديدة للصورة الثانوية (اختياري)",-1)),o.car.images&&o.car.images[1]?(y(),b("div",X,[t[40]||(t[40]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"الصورة الحالية:",-1)),e("img",{src:o.car.images[1],alt:o.car.brand_ar,class:"w-20 h-20 object-cover rounded-md mt-1"},null,8,Z)])):p("",!0)])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"رقم اللوحة",-1)),l(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r.value.license_plate=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"مثال: ABC-123"},null,512),[[n,r.value.license_plate]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الوصف",-1)),l(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=a=>r.value.description_ar=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"وصف السيارة"},null,512),[[n,r.value.description_ar]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"المميزات",-1)),e("div",ee,[e("label",te,[l(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>r.value.features=a),type:"checkbox",value:"مكيف هواء",class:"ml-2"},null,512),[[i,r.value.features]]),t[45]||(t[45]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"مكيف هواء",-1))]),e("label",ae,[l(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>r.value.features=a),type:"checkbox",value:"نظام صوت",class:"ml-2"},null,512),[[i,r.value.features]]),t[46]||(t[46]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"نظام صوت",-1))]),e("label",re,[l(e("input",{"onUpdate:modelValue":t[15]||(t[15]=a=>r.value.features=a),type:"checkbox",value:"وسائد هوائية",class:"ml-2"},null,512),[[i,r.value.features]]),t[47]||(t[47]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"وسائد هوائية",-1))]),e("label",le,[l(e("input",{"onUpdate:modelValue":t[16]||(t[16]=a=>r.value.features=a),type:"checkbox",value:"كاميرا خلفية",class:"ml-2"},null,512),[[i,r.value.features]]),t[48]||(t[48]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"كاميرا خلفية",-1))]),e("label",se,[l(e("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>r.value.features=a),type:"checkbox",value:"GPS",class:"ml-2"},null,512),[[i,r.value.features]]),t[49]||(t[49]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"GPS",-1))]),e("label",oe,[l(e("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>r.value.features=a),type:"checkbox",value:"Bluetooth",class:"ml-2"},null,512),[[i,r.value.features]]),t[50]||(t[50]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Bluetooth",-1))])])]),e("div",de,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"الحالة",-1)),l(e("select",{"onUpdate:modelValue":t[19]||(t[19]=a=>r.value.status=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},t[52]||(t[52]=[e("option",{value:"available"},"متاحة",-1),e("option",{value:"rented"},"مستأجرة",-1),e("option",{value:"maintenance"},"في الصيانة",-1),e("option",{value:"unavailable"},"غير متاحة",-1)]),512),[[f,r.value.status]])]),e("div",ne,[e("label",ue,[l(e("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>r.value.is_featured=a),type:"checkbox",class:"ml-2"},null,512),[[i,r.value.is_featured]]),t[54]||(t[54]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"سيارة مميزة",-1))])])]),e("div",ie,[e("button",{type:"button",onClick:V,class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"}," إلغاء "),e("button",{type:"submit",disabled:g.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},x(g.value?"جاري التحديث...":"تحديث السيارة"),9,ge)])],32)])])]),_:1})],64))}};export{ke as default};
